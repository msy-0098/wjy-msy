<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ä½³èŒµå§å§ä¸“å±ç™»å½•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', 'Comic Sans MS', sans-serif;
        }

        /* å»¶ç»­é©¬å¡é¾™æŸ”å’Œé£æ ¼ */
        body {
            background-color: #fff9f5;
            color: #666;
            line-height: 1.6;
            padding: 20px 15px;
            background-image: 
                radial-gradient(#ffd6e0 4px, transparent 4px),
                radial-gradient(#d6eaff 4px, transparent 4px);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            background-opacity: 0.2;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-container {
            max-width: 420px;
            width: 100%;
            background-color: #fff;
            padding: 30px 25px;
            border-radius: 20px;
            box-shadow: 0 6px 18px rgba(255, 182, 193, 0.15);
            border: 1px solid #ffe6f0;
        }

        .login-header {
            text-align: center;
            margin-bottom: 28px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ffe6f0;
        }

        .login-header h1 {
            color: #ff6b8b;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .login-header h1::before,
        .login-header h1::after {
            content: "ğŸ’–";
            font-size: 1.4rem;
        }

        .login-header p {
            color: #888;
            font-size: 0.95rem;
        }

        /* è¾“å…¥ç»„æ ·å¼ï¼šèŒç³»å›¾æ ‡+æŸ”å’Œè¾¹æ¡† */
        .input-group {
            margin-bottom: 22px;
            position: relative;
        }

        .input-group::before {
            content: "";
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.1rem;
            color: #ff85a2;
        }

        .input-group.username::before {
            content: "ğŸ‘¤";
        }

        .input-group.password::before {
            content: "ğŸ”‘";
        }

        .login-input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border: 2px solid #ffe6f0;
            border-radius: 30px;
            font-size: 1rem;
            color: #666;
            transition: all 0.3s ease;
            background-color: #fff;
        }

        .login-input:focus {
            outline: none;
            border-color: #ffb3d9;
            box-shadow: 0 0 0 3px rgba(255, 182, 193, 0.2);
        }

        .login-input::placeholder {
            color: #ccc;
            font-size: 0.95rem;
        }

        /* æŒ‰é’®æ ·å¼ï¼šç²‰è‰²ç³»+èŒç³»äº¤äº’ */
        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-login {
            background-color: #ff85a2;
            color: white;
            margin-bottom: 12px;
        }

        .btn-login::after {
            content: "ğŸš€";
        }

        .btn-login:hover {
            background-color: #ff6b8b;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255, 182, 193, 0.2);
        }

        .btn-change-pwd {
            background-color: #fff;
            color: #ff85a2;
            border: 2px solid #ffe6f0;
        }

        .btn-change-pwd::after {
            content: "ğŸ”„";
        }

        .btn-change-pwd:hover {
            background-color: #fff0f5;
            border-color: #ffb3d9;
        }

        /* å¯†ç ä¿®æ”¹æ¨¡æ€æ¡†ï¼šå±…ä¸­+æŸ”å’Œæ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            z-index: 100;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }

        .modal-content {
            background-color: #fff;
            width: 100%;
            max-width: 380px;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 6px 20px rgba(255, 182, 193, 0.18);
            border: 1px solid #ffe6f0;
            position: relative;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
            color: #ff6b8b;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.2rem;
            color: #888;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #ff6b8b;
        }

        .btn-group-modal {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .btn-cancel {
            background-color: #fff;
            color: #888;
            border: 2px solid #eee;
        }

        .btn-confirm-change {
            background-color: #ff85a2;
            color: white;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 400px) {
            .login-container {
                padding: 25px 20px;
            }

            .login-header h1 {
                font-size: 1.5rem;
            }

            .modal-content {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="login-header">
            <h1>ä½³èŒµå§å§ä¸“å±ç™»å½•</h1>
            <p>è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ~</p>
        </div>

        <!-- ç™»å½•è¡¨å• -->
        <form id="loginForm">
            <div class="input-group username">
                <input type="text" class="login-input" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·åå‘€ï½" required>
            </div>
            <div class="input-group password">
                <input type="password" class="login-input" id="password" placeholder="è¯·è¾“å…¥å¯†ç å‘€ï½" required>
            </div>
            <button type="submit" class="btn btn-login">ç¡®è®¤ç™»å½•</button>
            <button type="button" class="btn btn-change-pwd" id="openChangePwdModal">æ›´æ”¹å¯†ç </button>
        </form>
    </div>

    <!-- å¯†ç ä¿®æ”¹æ¨¡æ€æ¡† -->
    <div class="modal" id="changePwdModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <div class="modal-header">ä¿®æ”¹å¯†ç </div>
            <div class="input-group username">
                <input type="text" class="login-input" id="changeUsername" placeholder="è¯·è¾“å…¥ç”¨æˆ·åï¼ˆä»…æ”¯æŒä½³èŒµï¼‰" required>
            </div>
            <div class="input-group password">
                <input type="password" class="login-input" id="oldPassword" placeholder="è¯·è¾“å…¥åŸå¯†ç ï½" required>
            </div>
            <div class="input-group password">
                <input type="password" class="login-input" id="newPassword" placeholder="è¯·è¾“å…¥æ–°å¯†ç ï½" required>
            </div>
            <div class="input-group password">
                <input type="password" class="login-input" id="confirmNewPassword" placeholder="è¯·ç¡®è®¤æ–°å¯†ç ï½" required>
            </div>
            <div class="btn-group-modal">
                <button type="button" class="btn btn-cancel" id="cancelChange">å–æ¶ˆ</button>
                <button type="button" class="btn btn-confirm-change" id="confirmChange">ç¡®è®¤ä¿®æ”¹</button>
            </div>
        </div>
    </div>

    <script>
        // 1. å•ç”¨æˆ·é…ç½®ï¼ˆä»…æ”¯æŒ"ä½³èŒµ"ï¼‰
        const targetUser = "ä½³èŒµ"; // å›ºå®šç›®æ ‡ç”¨æˆ·
        let userPassword = "050904"; // åˆå§‹å¯†ç ï¼Œå¯ä¿®æ”¹
        // æ ¸å¿ƒä¿®æ”¹ï¼šå°†è·³è½¬é“¾æ¥æ”¹ä¸ºæŒ‡å®šçš„Netlifyç½‘å€
        const targetUrl = "https://rainhometest.netlify.app/"; 

        // 2. DOMå…ƒç´ è·å–
        const loginForm = document.getElementById("loginForm");
        const usernameInput = document.getElementById("username");
        const passwordInput = document.getElementById("password");

        // å¯†ç ä¿®æ”¹æ¨¡æ€æ¡†å…ƒç´ 
        const changePwdModal = document.getElementById("changePwdModal");
        const openChangePwdModalBtn = document.getElementById("openChangePwdModal");
        const closeModalBtn = document.getElementById("closeModal");
        const cancelChangeBtn = document.getElementById("cancelChange");
        const confirmChangeBtn = document.getElementById("confirmChange");
        const changeUsernameInput = document.getElementById("changeUsername");
        const oldPasswordInput = document.getElementById("oldPassword");
        const newPasswordInput = document.getElementById("newPassword");
        const confirmNewPasswordInput = document.getElementById("confirmNewPassword");

        // 3. æ ¸å¿ƒç™»å½•é€»è¾‘ï¼ˆä¸¥æ ¼éªŒè¯ç”¨æˆ·å+å¯†ç ï¼‰
        loginForm.addEventListener("submit", function(e) {
            e.preventDefault(); // é˜»æ­¢è¡¨å•é»˜è®¤æäº¤
            const inputUsername = usernameInput.value.trim();
            const inputPassword = passwordInput.value.trim();

            // ç¬¬ä¸€æ­¥ï¼šéªŒè¯ç”¨æˆ·åæ˜¯å¦ä¸º"ä½³èŒµ"
            if (inputUsername !== targetUser) {
                alert("ç”¨æˆ·ä¸å­˜åœ¨"); // æŒ‰éœ€æ±‚å¼¹çª—æç¤º
                usernameInput.value = "";
                passwordInput.value = "";
                usernameInput.focus();
                return;
            }

            // ç¬¬äºŒæ­¥ï¼šéªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®
            if (inputPassword !== userPassword) {
                alert("å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥"); // å¼¹çª—æç¤ºå¯†ç é”™è¯¯
                passwordInput.value = "";
                passwordInput.focus();
                return;
            }

            // ç™»å½•æˆåŠŸï¼šå¼¹çª—æç¤º+è·³è½¬è‡³æŒ‡å®šNetlifyç½‘å€
            alert(`æ¬¢è¿å›æ¥ï¼Œ${targetUser}ï¼å³å°†è¿›å…¥å¿ƒæƒ…å°ç®¡å®¶ï½`);
            setTimeout(() => {
                // å­˜å‚¨å½“å‰ç™»å½•ç”¨æˆ·ï¼ˆä¾›åç»­ç•Œé¢ä½¿ç”¨ï¼‰
                localStorage.setItem("currentLoginUser", targetUser);
                // æ ¸å¿ƒä¿®æ”¹ï¼šè·³è½¬è‡³æŒ‡å®šç½‘å€
                window.location.href = targetUrl;
            }, 1200);
        });

        // 4. å¯†ç ä¿®æ”¹æ¨¡æ€æ¡†æ§åˆ¶
        // æ‰“å¼€æ¨¡æ€æ¡†
        openChangePwdModalBtn.addEventListener("click", function() {
            changePwdModal.style.display = "flex";
            // æ¸…ç©ºæ¨¡æ€æ¡†è¾“å…¥
            changeUsernameInput.value = "";
            oldPasswordInput.value = "";
            newPasswordInput.value = "";
            confirmNewPasswordInput.value = "";
        });

        // å…³é—­æ¨¡æ€æ¡†ï¼ˆä¸‰ç§è§¦å‘æ–¹å¼ï¼‰
        function closeModal() {
            changePwdModal.style.display = "none";
        }
        closeModalBtn.addEventListener("click", closeModal);
        cancelChangeBtn.addEventListener("click", closeModal);
        window.addEventListener("click", function(e) {
            if (e.target === changePwdModal) {
                closeModal();
            }
        });

        // 5. å¯†ç ä¿®æ”¹é€»è¾‘ï¼ˆä»…å…è®¸ä¿®æ”¹"ä½³èŒµ"çš„å¯†ç ï¼‰
        confirmChangeBtn.addEventListener("click", function() {
            const inputChangeUser = changeUsernameInput.value.trim();
            const inputOldPwd = oldPasswordInput.value.trim();
            const inputNewPwd = newPasswordInput.value.trim();
            const inputConfirmNewPwd = confirmNewPasswordInput.value.trim();

            // éªŒè¯1ï¼šç”¨æˆ·åå¿…é¡»æ˜¯"ä½³èŒµ"
            if (inputChangeUser !== targetUser) {
                alert("ä»…æ”¯æŒä¿®æ”¹" + targetUser + "çš„å¯†ç ");
                changeUsernameInput.value = "";
                changeUsernameInput.focus();
                return;
            }

            // éªŒè¯2ï¼šåŸå¯†ç å¿…é¡»æ­£ç¡®
            if (inputOldPwd !== userPassword) {
                alert("åŸå¯†ç é”™è¯¯ï¼Œæ— æ³•ä¿®æ”¹");
                oldPasswordInput.value = "";
                oldPasswordInput.focus();
                return;
            }

            // éªŒè¯3ï¼šæ–°å¯†ç ä¸ä¸ºç©ºä¸”é•¿åº¦â‰¥6
            if (!inputNewPwd || inputNewPwd.length < 6) {
                alert("æ–°å¯†ç è‡³å°‘éœ€è¦6ä½å­—ç¬¦");
                newPasswordInput.value = "";
                newPasswordInput.focus();
                return;
            }

            // éªŒè¯4ï¼šä¸¤æ¬¡æ–°å¯†ç ä¸€è‡´
            if (inputNewPwd !== inputConfirmNewPwd) {
                alert("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´");
                confirmNewPasswordInput.value = "";
                confirmNewPasswordInput.focus();
                return;
            }

            // éªŒè¯5ï¼šæ–°å¯†ç ä¸èƒ½ä¸åŸå¯†ç ç›¸åŒ
            if (inputNewPwd === inputOldPwd) {
                alert("æ–°å¯†ç ä¸èƒ½ä¸åŸå¯†ç ç›¸åŒ");
                newPasswordInput.value = "";
                confirmNewPasswordInput.value = "";
                newPasswordInput.focus();
                return;
            }

            // æ‰€æœ‰éªŒè¯é€šè¿‡ï¼šæ›´æ–°å¯†ç +æç¤º+å…³é—­æ¨¡æ€æ¡†
            userPassword = inputNewPwd;
            alert("å¯†ç ä¿®æ”¹æˆåŠŸï¼ä¸‹æ¬¡ç™»å½•è¯·ä½¿ç”¨æ–°å¯†ç ");
            closeModal();
            // åŒæ­¥æ›´æ–°ç™»å½•è¡¨å•çš„å¯†ç ï¼ˆæå‡ä½“éªŒï¼‰
            passwordInput.value = inputNewPwd;
        });
    </script>
</body>
</html>
